{"ast":null,"code":"'use strict';\n\nvar glob = require('glob');\n\nvar path = require('path');\n\nfunction trueCasePathSync(fsPath) {\n  // Normalize the path so as to resolve . and .. components.\n  // !! As of Node v4.1.1, a path starting with ../ is NOT resolved relative\n  // !! to the current dir, and glob.sync() below then fails.\n  // !! When in doubt, resolve with fs.realPathSync() *beforehand*.\n  var fsPathNormalized = path.normalize(fsPath); // OSX: HFS+ stores filenames in NFD (decomposed normal form) Unicode format,\n  // so we must ensure that the input path is in that format first.\n\n  if (process.platform === 'darwin') fsPathNormalized = fsPathNormalized.normalize('NFD'); // !! Windows: Curiously, the drive component mustn't be part of a glob,\n  // !! otherwise glob.sync() will invariably match nothing.\n  // !! Thus, we remove the drive component and instead pass it in as the 'cwd'\n  // !! (working dir.) property below.\n\n  var pathRoot = path.parse(fsPathNormalized).root;\n  var noDrivePath = fsPathNormalized.slice(Math.max(pathRoot.length - 1, 0)); // Perform case-insensitive globbing (on Windows, relative to the drive /\n  // network share) and return the 1st match, if any.\n  // Fortunately, glob() with nocase case-corrects the input even if it is\n  // a *literal* path.\n\n  return glob.sync(noDrivePath, {\n    nocase: true,\n    cwd: pathRoot\n  })[0];\n}\n\nmodule.exports = trueCasePathSync;","map":null,"metadata":{},"sourceType":"script"}